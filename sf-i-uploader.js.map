{"version":3,"file":"sf-i-uploader.js","sourceRoot":"","sources":["src/sf-i-uploader.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright 2022 Superflow.dev\n * SPDX-License-Identifier: MIT\n */\n\nimport {LitElement, html, css, PropertyValueMap} from 'lit';\n// import {customElement, query, queryAssignedElements, property} from 'lit/decorators.js';\n// import {SfISelect} from 'sf-i-select';\n// import {SfISubSelect} from 'sf-i-sub-select';\nimport {customElement, query, property} from 'lit/decorators.js';\nimport Util from './util';\n// import {LitElement, html, css} from 'lit';\n// import {customElement} from 'lit/decorators.js';\n\n\n/*\n\nModes: View, Add, Edit, Delete, Admin\nDB: partitionKey, rangeKey, values\n\n*/\n\n/**\n * SfIUploader element.\n * @fires renderComplete - When the list is populated\n * @fires valueChanged - When the value is changed\n * @property apiId - backend api id\n * @property label - input label\n * @property name - name of the input\n * @property mode - mode of operation\n * @property selectedId - id to preselect\n * @property selectedValue - callback function\n */\n@customElement('sf-i-uploader')\nexport class SfIUploader extends LitElement {\n  \n  @property()\n  prepopulatedInputArr: string = \"[]\";\n\n\n  @property()\n  readOnly: boolean = false;\n\n  @property()\n  max!: string;\n\n  getMax = () => {\n\n    try {\n      return parseInt(this.max)\n    } catch (e) {\n      return 0;\n    }\n\n  }\n\n  @property()\n  maxSize: number = 512000;\n\n  @property()\n  apiId!: string;\n\n  @property()\n  extract: string = \"no\";\n\n  @property()\n  allowedExtensions: string = \"[\\\"jpg\\\", \\\"png\\\"]\";\n\n  // @property()\n  // extractedWords: string = \"[]\";\n\n  @property()\n  extractJobId: string = \"\";\n\n  getAllowedExtensions = () => {\n    return JSON.parse(this.allowedExtensions)\n  }\n\n  setAllowedExtensions = (arr: any) => {\n    this.allowedExtensions = JSON.stringify(arr);\n  }\n\n  // getExtractedWords = () => {\n  //   return JSON.parse(this.extractedWords)\n  // }\n\n  // setExtractedWords = (arr: any) => {\n  //   this.extractedWords = JSON.stringify(arr);\n  // }\n\n  selectedValues = () => {\n    const values = [];\n\n    for(var i = 0; i < this.inputArr.length; i++) {\n      if(this.inputArr[i]['key'] != null) {\n\n        if(this.inputArr[i]['arrWords'] != null) {\n          values.push({\n            arrWords: this.inputArr[i]['arrWords'],\n            arrWordsMeta: this.inputArr[i]['arrWordsMeta'],\n            jobId: this.inputArr[i]['jobId'],\n            key: this.inputArr[i]['key'],\n            ext: this.inputArr[i]['ext']\n          })\n        } else if(this.inputArr[i]['jobId'] != null) {\n          values.push({\n            jobId: this.inputArr[i]['jobId'],\n            key: this.inputArr[i]['key'],\n            ext: this.inputArr[i]['ext']\n          })\n        } else if(this.inputArr[i]['ext'] != null) {\n          values.push({\n            key: this.inputArr[i]['key'],\n            ext: this.inputArr[i]['ext']\n          })\n        } else {\n          values.push({\n            key: this.inputArr[i]['key'],\n            ext: this.inputArr[i]['file'].name.split(\".\")[this.inputArr[i]['file'].name.split(\".\").length - 1]\n          })\n        }\n      }\n    }\n    return values;\n  }\n\n  inputArr: any[] = [];\n\n  uploadProgress: any = {progress: 0};\n  uploadProgressReceiver: any = null;\n\n  // extractState: any = {state: 0};\n\n  current: number = 0;\n\n  arrWords: any = [];\n  arrWordsMeta: any = {};\n\n  @property()\n  flow: string = \"\";\n\n  static override styles = css`\n\n    \n    .SfIUploaderC {\n    }\n\n    .left-sticky {\n      left: 0px;\n      position: sticky;\n    }\n\n    .invisible {\n      visibility: hidden\n    }\n\n    #detail-container {\n      width: 90%;\n      margin-left: 5%;\n      height: 90vh;\n      margin-top: 5vh;\n      position: fixed;\n      left: 0px;\n      top: 0px;\n      background-color: #efefef;\n      box-shadow: 1px 1px 10px 0 rgba(0, 0, 0, 0.25), -1px -1px 10px 0 rgba(255, 255, 255, 0.6);\n      border-top: solid 1px rgba(255, 255, 255, 0.3);\n      border-left: solid 1px rgba(255, 255, 255, 0.3);\n      border-bottom: solid 1px rgba(0, 0, 0, 0.1);\n      border-right: solid 1px rgba(0, 0, 0, 0.1);\n      overflow-y: auto;\n      border-radius: 10px;\n      z-index: 97;\n    }\n\n    .w-100 {\n      width: 100%;\n    }\n\n    .ext-badge {\n      padding-left: 10px;\n      padding-right: 10px;\n      padding-top: 5px;\n      padding-bottom: 5px;\n      border-radius: 10px;\n      border: solid 1px gray;\n      color: gray;\n      line-height: 100%;\n      text-transform: uppercase;\n      font-size: 80%;\n    }\n\n    .progress-bar {\n      height: 3px;\n    }\n\n    .progress-bar-left {\n      background-color: #20a39e;\n      width: 0%;\n    }\n\n    .progress-bar-right {\n      width: 100%;\n    }\n\n    .upload-status {\n      color: gray;\n    }\n\n    .link {\n      text-decoration: underline;\n      cursor: pointer;\n    }\n\n    .gone {\n      display: none\n    }\n\n    .loader-element {\n      position: fixed;\n      right: 10px;\n      top: 10px;\n      margin-left: 5px;\n    }\n\n    .flex-wrap {\n      flex-wrap: wrap;\n    }\n\n    .td-head {\n      text-transform: capitalize;\n    }\n\n    .td-body {\n      padding: 5px;\n    }\n\n    .td-dark {\n      background-color: #e9e9e9;\n    }\n\n    .td-highlight {\n      background-color: black;\n      color: white;\n    }\n\n    .td-light {\n      background-color: #f6f6f6;\n    }\n\n    td {\n      white-space: nowrap;\n    }\n\n    .d-flex {\n      display: flex;\n    }\n\n    .flex-col {\n      flex-direction: column;\n    }\n\n    .justify-center {\n      justify-content: center;\n    }\n\n    .justify-between {\n      justify-content: space-between;\n    }\n\n    .justify-end {\n      justify-content: flex-end;\n    }\n\n    .flex-grow {\n      flex-grow: 1;\n    }\n\n    .align-start {\n      align-items: flex-start;\n    }\n\n    .align-end {\n      align-items: flex-end;\n    }\n\n    .align-center {\n      align-items: center;\n    }\n    \n    .lds-dual-ring {\n      display: inline-block;\n      width: 50px;\n      height: 50px;\n    }\n    .lds-dual-ring:after {\n      content: \" \";\n      display: block;\n      width: 50px;\n      height: 50px;\n      margin: 0px;\n      border-radius: 50%;\n      border: 2px solid #fff;\n      border-color: #888 #ddd #888 #ddd;\n      background-color: white;\n      animation: lds-dual-ring 0.8s linear infinite;\n    }\n\n    .lds-dual-ring-lg {\n      display: inline-block;\n      width: 30px;\n      height: 30px;\n    }\n    .lds-dual-ring-lg:after {\n      content: \" \";\n      display: block;\n      width: 30px;\n      height: 30px;\n      margin: 0px;\n      border-radius: 50%;\n      border: 3px solid #fff;\n      border-color: #888 #ddd #888 #ddd;\n      animation: lds-dual-ring 0.8s linear infinite;\n    }\n\n    .div-row-error {\n      display: flex;\n      justify-content: center;\n      position: fixed;\n      position: fixed;\n      top: 0px;\n      right: 0px;\n      margin-top: 20px;\n      margin-right: 20px;\n      display: none;\n      align-items:center;\n      background-color: white;\n      border: dashed 1px red;\n      padding: 20px;\n    }\n\n    .div-row-error-message {\n      color: red;\n      padding: 5px;\n      background-color: white;\n      text-align: center;\n    }\n\n    .div-row-success {\n      display: flex;\n      justify-content: center;\n      position: fixed;\n      top: 0px;\n      right: 0px;\n      margin-top: 20px;\n      margin-right: 20px;\n      display: none;\n      align-items:center;\n      background-color: white;\n      border: dashed 1px green;\n      padding: 20px;\n    }\n\n    .div-row-success-message {\n      color: green;\n      padding: 5px;\n      background-color: white;\n      text-align: center;\n    }\n\n    @keyframes lds-dual-ring {\n      0% {\n        transform: rotate(0deg);\n      }\n      100% {\n        transform: rotate(360deg);\n      }\n    }  \n\n    .hide {\n      display: none;\n    }\n\n    .lb {\n      width: 5%\n    }\n    .rb {\n      width: 5%\n    }\n\n    .bg-white {\n      background-color: white;\n    }\n\n    .p-5 {\n      padding: 5px;\n    }\n\n    .m-5 {\n      margin: 5px;\n    }\n\n    .m-0 {\n      margin: 0px;\n    }\n\n    .m-20 {\n      margin: 20px;\n    }\n\n    .mt-20 {\n      margin-top: 20px;\n    }\n\n    .mb-20 {\n      margin-bottom: 20px;\n    }\n\n    .ml-20 {\n      margin-left: 20px;\n    }\n\n    .mr-20 {\n      margin-right: 20px;\n    }\n\n    .m-10 {\n      margin: 20px;\n    }\n\n    .mt-10 {\n      margin-top: 10px;\n    }\n\n    .mb-10 {\n      margin-bottom: 10px;\n    }\n\n    .ml-10 {\n      margin-left: 10px;\n    }\n\n    .mr-10 {\n      margin-right: 10px;\n    }\n\n    @media (orientation: landscape) {\n\n      .lb {\n        width: 30%\n      }\n      .rb {\n        width: 30%\n      }\n\n    }\n\n  `;\n\n  @query('.div-row-error')\n  _SfRowError: any;\n\n  @query('.div-row-error-message')\n  _SfRowErrorMessage: any;\n\n  @query('.div-row-success')\n  _SfRowSuccess: any;\n\n  @query('.div-row-success-message')\n  _SfRowSuccessMessage: any;\n\n  @query('.loader-element')\n  _SfLoader: any;\n\n  @query('#upload-container')\n  _SfUploadContainer: any;\n\n  @query('#detail-container')\n  _SfDetailContainer: any;\n\n  @query('#button-add')\n  _SfButtonAdd: any;\n\n  prepareXhr = async (data: any, url: string, loaderElement: any, authorization: any) => {\n\n    \n    if(loaderElement != null) {\n      loaderElement.innerHTML = '<div class=\"lds-dual-ring\"></div>';\n    }\n    return await Util.callApi(url, data, authorization);\n\n  }\n\n  clearMessages = () => {\n    this._SfRowError.style.display = 'none';\n    this._SfRowErrorMessage.innerHTML = '';\n    this._SfRowSuccess.style.display = 'none';\n    this._SfRowSuccessMessage.innerHTML = '';\n  }\n\n  setError = (msg: string) => {\n    this._SfRowError.style.display = 'flex';\n    this._SfRowErrorMessage.innerHTML = msg;\n    this._SfRowSuccess.style.display = 'none';\n    this._SfRowSuccessMessage.innerHTML = '';\n  }\n\n  setSuccess = (msg: string) => {\n    this._SfRowError.style.display = 'none';\n    this._SfRowErrorMessage.innerHTML = '';\n    this._SfRowSuccess.style.display = 'flex';\n    this._SfRowSuccessMessage.innerHTML = msg;\n  }\n\n  uploadProgressUpdater = (element: HTMLElement, value: string) => {\n\n    element!.querySelector('.progress-number')!.innerHTML = value + '% Uploaded';\n    (element!.querySelector('.progress-bar-right') as HTMLDivElement)!.style.width = (100 - parseInt(value)) + '%';\n    (element!.querySelector('.progress-bar-left') as HTMLDivElement)!.style.width = value + '%';\n\n  }\n  \n  renderKeyData = (ext: string, data: string) => {\n\n    (this._SfDetailContainer as HTMLDivElement).style.display = 'block';\n\n    var html = '';\n\n    html += '<div class=\"d-flex justify-between m-10\">';\n    html += '<button class=\"invisible\" part=\"button-icon\"><span class=\"material-icons\">close</span></button>'\n    html += '<button id=\"button-detail-cancel\" part=\"button-icon\"><span class=\"material-icons\">close</span></button>'\n    html += '</div>';\n\n    if(ext == \"png\" || ext == \"jpg\") {\n\n      \n      html += '<div class=\"d-flex justify-center\">';\n      html += '<img src=\"'+data+'\" alt=\"picture\" />'\n      html += '</div>';\n\n\n    } else {\n\n      html += '<div class=\"d-flex justify-center align-center\">';\n      html += '<div part=\"sf-uploader-download-message\">File is ready for download!</div>&nbsp;&nbsp;&nbsp;&nbsp;'\n      html += '<button part=\"button-icon\" id=\"download-button\"><span class=\"material-icons\">cloud_download</span></button>'\n      html += '</div>';\n\n    }\n\n    (this._SfDetailContainer as HTMLDivElement).innerHTML = html;\n\n    (this._SfDetailContainer as HTMLDivElement).querySelector('#button-detail-cancel')?.addEventListener('click', () => {\n\n      (this._SfDetailContainer as HTMLDivElement).innerHTML = '';\n      (this._SfDetailContainer as HTMLDivElement).style.display = 'none';\n\n    });\n\n    (this._SfDetailContainer as HTMLDivElement).querySelector('#download-button')?.addEventListener('click', () => {\n\n      const a = document.createElement(\"a\");\n      a.style.display = \"none\";\n      a.href = data;\n      a.download = \"download_\"+new Date().getTime()+\".pdf\";\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a); \n\n    });\n\n  }\n\n  getKeyData = async (key: string) => {\n\n    let url = \"https://\"+this.apiId+\".execute-api.us-east-1.amazonaws.com/test/get\";\n\n    const body = { \"key\": key} \n    const authorization = btoa(Util.readCookie('email') + \":\" + Util.readCookie('accessToken'));\n    const xhr : any = (await this.prepareXhr(body, url, this._SfLoader, authorization)) as any;\n    this._SfLoader.innerHTML = '';\n    if(xhr.status == 200) {\n\n      const jsonRespose = JSON.parse(xhr.responseText);\n      console.log('jsonResponse sync', jsonRespose);\n      this.renderKeyData(jsonRespose.ext, jsonRespose.data);\n      \n    } else {\n      const jsonRespose = JSON.parse(xhr.responseText);\n      this.setError(jsonRespose.error);\n    }\n\n  }\n\n  getExtract = async (key: string) => {\n\n    let url = \"https://\"+this.apiId+\".execute-api.us-east-1.amazonaws.com/test/getextract\";\n\n    const body = { \"key\": key} \n    const authorization = btoa(Util.readCookie('email') + \":\" + Util.readCookie('accessToken'));\n    const xhr : any = (await this.prepareXhr(body, url, this._SfLoader, authorization)) as any;\n    this._SfLoader.innerHTML = '';\n    if(xhr.status == 200) {\n\n      const jsonRespose = JSON.parse(xhr.responseText);\n      console.log('jsonResponse sync', jsonRespose);\n      return jsonRespose;\n\n    } else {\n      const jsonRespose = JSON.parse(xhr.responseText);\n      this.setError(jsonRespose.error);\n    }\n\n  }\n\n  getExtractStatus = async (jobid: string) => {\n\n    let url = \"https://\"+this.apiId+\".execute-api.us-east-1.amazonaws.com/test/getextractstatus\";\n\n    const body = { \"jobid\": jobid} \n    const authorization = btoa(Util.readCookie('email') + \":\" + Util.readCookie('accessToken'));\n    const xhr : any = (await this.prepareXhr(body, url, this._SfLoader, authorization)) as any;\n    this._SfLoader.innerHTML = '';\n    if(xhr.status == 200) {\n\n      const jsonRespose = JSON.parse(xhr.responseText);\n      console.log('jsonResponse sync', jsonRespose);\n      return jsonRespose;\n      \n    } else {\n      const jsonRespose = JSON.parse(xhr.responseText);\n      this.setError(jsonRespose.error);\n    }\n\n  }\n\n  uploadMeta = async (key: string, ext: string, numblocks: string) => {\n\n    let url = \"https://\"+this.apiId+\".execute-api.us-east-1.amazonaws.com/test/upload\";\n\n    const body = { \"type\": \"meta\", \"key\": key, \"ext\": ext, \"numblocks\": numblocks} \n    const authorization = btoa(Util.readCookie('email') + \":\" + Util.readCookie('accessToken'));\n    const xhr : any = (await this.prepareXhr(body, url, this._SfLoader, authorization)) as any;\n    this._SfLoader.innerHTML = '';\n    if(xhr.status == 200) {\n\n      const jsonRespose = JSON.parse(xhr.responseText);\n      console.log('jsonResponse sync', jsonRespose);\n      \n    } else {\n      const jsonRespose = JSON.parse(xhr.responseText);\n      this.setError(jsonRespose.error);\n    }\n\n  }\n\n  uploadBlock = async (key: string, block: string, data: string) => {\n\n    //console.log('uploading..', data);\n\n    let url = \"https://\"+this.apiId+\".execute-api.us-east-1.amazonaws.com/test/upload\";\n\n    const body = { \"type\": \"data\", \"key\": key, \"data\": data, \"block\": block} \n    const authorization = btoa(Util.readCookie('email') + \":\" + Util.readCookie('accessToken'));\n    const xhr : any = (await this.prepareXhr(body, url, this._SfLoader, authorization)) as any;\n    this._SfLoader.innerHTML = '';\n    if(xhr.status == 200) {\n\n      // const jsonRespose = JSON.parse(xhr.responseText);\n      //console.log('jsonResponse sync', jsonRespose, block);\n      \n    } else {\n      const jsonRespose = JSON.parse(xhr.responseText);\n      this.setError(jsonRespose.error);\n    }\n\n  }\n\n  chunkify = (base64String: string) => {\n\n    const chunks = base64String.match(/.{1,8192}/g)\n    return chunks;\n\n  }\n\n  executeExtract = async (jobId: string) => {\n\n    var resultExtractStatus;\n\n    do {\n\n      //const jobId = \"55ef692a8a5780896b8b2d5ab63f9a5d74c9b93b4707acb812e2e334ecad7236\";\n      resultExtractStatus = await this.getExtractStatus(jobId);\n      console.log(resultExtractStatus.status.JobStatus);\n\n      await Util.sleep(5000);\n\n    } while (resultExtractStatus.status.JobStatus == \"IN_PROGRESS\");\n\n    if(resultExtractStatus.status.JobStatus == \"SUCCEEDED\") {\n\n      this.arrWords = [];\n      this.arrWordsMeta = {};\n\n      for(var i = 0; i < resultExtractStatus.status.Blocks.length; i++) {\n\n        const block: any = resultExtractStatus.status.Blocks[i];\n        console.log(block.BlockType);\n        if(this.arrWordsMeta[block.BlockType] == null) {\n          this.arrWordsMeta[block.BlockType] = 0;\n        }\n        this.arrWordsMeta[block.BlockType]++;\n\n        if(block.BlockType == \"WORD\") {\n          this.arrWords.push(block.Text + \"\");\n        }\n\n      }\n\n      // this.setExtractedWords(this.arrWords)\n      // console.log(this.arrWordsMeta);\n      // console.log(this.arrWords);\n      // this.extractState.state = 2;\n\n    }\n\n  }\n\n  processExtract = async (key: string) => {\n\n    // this.extractState.state = 1;\n\n    const resultExtract = await this.getExtract(key);\n    console.log(resultExtract);\n\n    const jobId = resultExtract.jobId;\n    return jobId;\n  \n  }\n\n  executeAndUpdateExtract = async (jobId: string, fileIndex: number) => {\n\n    await this.executeExtract(jobId);\n    this.inputArr[fileIndex][\"arrWords\"] = this.arrWords;\n    this.inputArr[fileIndex][\"arrWordsMeta\"] = this.arrWordsMeta;\n    const event2 = new CustomEvent('analysisCompleted', {detail: {meta: this.arrWordsMeta, words: this.arrWords}, bubbles: true, composed: true});\n    this.dispatchEvent(event2);\n    \n  }\n\n  beginUploadJob = (fileIndex: any, file: any) => {\n\n    const fileName = file.name;\n    const ext = file.name.split(\".\")[file.name.split(\".\").length - 1];\n    const key = Util.newUuidV4();\n    \n    console.log(fileName, ext, key);\n\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onloadend = () => {\n\n      const run = async () => {\n\n        console.log('filed received', reader.result)\n        const chunks = this.chunkify(reader.result as string);\n        await this.uploadMeta(key, ext, chunks?.length + \"\")\n        for(var i = 0; i < chunks!.length; i++) {\n          this.uploadProgressReceiver = (this._SfUploadContainer as HTMLDivElement).querySelector('#upload-row-'+fileIndex);\n          await this.uploadBlock(key, i + \"\", chunks![i] + \"\")\n          this.uploadProgress.progress = parseInt((((i+1)*100)/chunks!.length) + \"\");\n        }\n        for(var i = 0; i < this.inputArr.length; i++) {\n          this.inputArr[i][\"progress\"] = false;\n        }\n        this.inputArr[fileIndex][\"key\"] = key;\n        this.inputArr[fileIndex][\"ext\"] = ext;\n\n        const keys = [];\n        for(i = 0; i < this.inputArr.length; i++) {\n          if(this.inputArr[i]['key'] != null && this.inputArr[i]['key'].length > 5) {\n            keys.push(this.inputArr[i]['key']);\n          }\n        }\n        const event = new CustomEvent('uploadCompleted', {detail: keys, bubbles: true, composed: true});\n        this.dispatchEvent(event);\n\n        if(this.extract.toLowerCase() == \"yes\") {\n\n          const jobId = await this.processExtract(key);\n          this.inputArr[fileIndex][\"jobId\"] = jobId;\n          const event1 = new CustomEvent('analysisInProgress', {detail: jobId, bubbles: true, composed: true});\n          this.dispatchEvent(event1);\n\n          this.executeAndUpdateExtract(jobId, fileIndex);\n\n        }\n\n      }\n      run();\n\n    }\n\n  }\n\n  clearUploads = () => {\n    this.inputArr = [];    \n  }\n\n  populateInputs = () => {\n\n    console.log('populateinputs', this.inputArr);\n\n    var htmlStr = '';\n\n    for(var i = 0; i < this.inputArr.length; i++) {\n      htmlStr += '<div part=\"input\" id=\"upload-row-'+i+'\">';\n        htmlStr += '<div class=\"d-flex align-center justify-between flex-wrap\">';\n        if(this.inputArr[i].file == null) {\n\n          htmlStr += '<input id=\"file-'+i+'\" type=\"file\" />';\n          htmlStr += '<button id=\"button-delete-'+i+'\" part=\"button-icon\"><span class=\"material-icons\">delete</span></button>';\n        } else if (this.inputArr[i][\"arrWords\"] != null) {\n\n          const fileName = this.inputArr[i]['file'].name;\n          const ext = this.inputArr[i]['file'].name.split(\".\")[this.inputArr[i]['file'].name.split(\".\").length - 1];\n          htmlStr += '<div class=\"w-100 d-flex align-center justify-between\">';\n            htmlStr += '<div class=\"mr-10\"><sf-i-elastic-text text=\"'+fileName+'\" minLength=\"20\"></sf-i-elastic-text></div>';\n            htmlStr += '<div class=\"d-flex align-center\">';\n              htmlStr += '<div class=\"mr-10 upload-status\" part=\"upload-status\">Analysis Complete</div>';\n              htmlStr += '<div part=\"ext-badge\" class=\"ext-badge mr-10\">'+ext+'</div>';\n              htmlStr += '<button id=\"button-open-'+i+'\" part=\"button-icon\" class=\"\"><span class=\"material-icons\">open_in_new</span></button>';\n            htmlStr += '</div>';\n          htmlStr += '</div>';\n          htmlStr += '<div part=\"extracted-meta\" class=\"d-flex align-center mt-10 w-100\">';\n            htmlStr += '<div part=\"extracted-text-chip\">'+this.inputArr[i][\"arrWordsMeta\"]['PAGE']+' Pages</div>';\n            htmlStr += '<div part=\"extracted-text-chip\">'+this.inputArr[i][\"arrWordsMeta\"]['LINE']+' Lines</div>';\n            htmlStr += '<div part=\"extracted-text-chip\">'+this.inputArr[i][\"arrWordsMeta\"]['WORD']+' Words</div>';\n          htmlStr += '</div>';\n          htmlStr += '<div part=\"extracted-text\" class=\"d-flex align-center mt-10\">';\n          htmlStr += '<sf-i-elastic-text text=\"'+this.inputArr[i][\"arrWords\"].join(' ')+'\" minLength=\"100\"></sf-i-elastic-text>';\n          htmlStr += '</div>';\n\n        } else if (this.inputArr[i][\"jobId\"] != null) {\n\n          const fileName = this.inputArr[i]['file'].name;\n          const ext = this.inputArr[i]['file'].name.split(\".\")[this.inputArr[i]['file'].name.split(\".\").length - 1];\n          htmlStr += '<div class=\"mr-10\"><sf-i-elastic-text text=\"'+fileName+'\" minLength=\"20\"></sf-i-elastic-text></div>';\n          htmlStr += '<div class=\"d-flex align-center\">';\n          htmlStr += '<div class=\"mr-10 upload-status\" part=\"upload-status\">Analyzing...</div>';\n          htmlStr += '<div part=\"ext-badge\" class=\"ext-badge mr-10\">'+ext+'</div>';\n          htmlStr += '</div>';\n\n        } else if (this.inputArr[i][\"key\"] != null) {\n          console.log('there')\n          const fileName = this.inputArr[i]['file'].name;\n          const ext = this.inputArr[i]['file'].name.split(\".\")[this.inputArr[i]['file'].name.split(\".\").length - 1];\n          htmlStr += '<div class=\"mr-10\"><sf-i-elastic-text text=\"'+fileName+'\" minLength=\"20\"></sf-i-elastic-text></div>';\n          htmlStr += '<div class=\"d-flex align-center\">';\n          htmlStr += '<div class=\"mr-10 upload-status\" part=\"upload-status\">Upload Complete</div>';\n          htmlStr += '<div part=\"ext-badge\" class=\"ext-badge mr-10\">'+ext+'</div>';\n          htmlStr += '<button id=\"button-open-'+i+'\" part=\"button-icon\" class=\"\"><span class=\"material-icons\">open_in_new</span></button>';\n          htmlStr += '</div>';\n        }else {\n          console.log('hello')\n          console.log(this.inputArr[i])\n          const fileName = this.inputArr[i]['file'].name;\n          const ext = this.inputArr[i]['file'].name.split(\".\")[this.inputArr[i]['file'].name.split(\".\").length - 1];\n          htmlStr += '<div class=\"mr-10\"><sf-i-elastic-text text=\"'+fileName+'\" minLength=\"20\"></sf-i-elastic-text></div>';\n          htmlStr += '<div class=\"d-flex align-center\">';\n          htmlStr += '<div class=\"progress-number mr-10 upload-status\" part=\"upload-status\"></div>';\n          htmlStr += '<div part=\"ext-badge\" class=\"ext-badge mr-10\">'+ext+'</div>';\n          if(this.inputArr[i][\"progress\"] == null || !this.inputArr[i][\"progress\"]) {\n            htmlStr += '<button id=\"button-cancel-'+i+'\" part=\"button-icon\" class=\"mr-10\"><span class=\"material-icons\">close</span></button>';\n            htmlStr += '<button id=\"button-upload-'+i+'\" part=\"button-icon\" class=\"d-flex align-center\"><h3 class=\"m-5\">Upload</h3> <span class=\"material-icons\">upload</span></button>';\n          }\n          htmlStr += '</div>';\n        }\n        htmlStr += '</div>';\n        if(this.inputArr[i][\"progress\"]) {\n          htmlStr += '<div class=\"d-flex\">'\n          htmlStr += '<div class=\"progress-bar progress-bar-left\" id=\"progress-bar-left-'+i+'\"></div>'\n          htmlStr += '<div class=\"progress-bar progress-bar-right\" id=\"progress-bar-right-'+i+'\"></div>'\n          htmlStr += '</div>'\n        }\n      htmlStr += '</div>';\n      \n      \n    }\n\n    if(!this.readOnly) {\n      htmlStr += '<button id=\"button-add\" part=\"button\" class=\"mt-10\">New Upload</button>';\n    }\n\n    (this._SfUploadContainer as HTMLDivElement).innerHTML = htmlStr;\n\n    (this._SfUploadContainer as HTMLDivElement).querySelector('#button-add')?.addEventListener('click', () => {\n      console.log('current', this.current);\n      if(this.current < this.getMax()) {\n        this.current++;\n        this.inputArr.push({})\n        console.log('pushed', this.inputArr);\n      }\n      \n    });\n\n    for(i = 0; i < this.inputArr.length; i++) {\n\n      (this._SfUploadContainer as HTMLDivElement).querySelector('#button-delete-'+i)?.addEventListener('click', (ev: any) => {\n        const index = ev.currentTarget.id.split(\"-\")[2];\n        console.log('delete clicked ', index);\n        this.inputArr.splice(index, 1)\n      });\n\n      (this._SfUploadContainer as HTMLDivElement).querySelector('#file-'+i)?.addEventListener('change', (ev: any) => {\n        const index = ev.target.id.split(\"-\")[1];\n        const input = (ev.target as HTMLInputElement);\n        this.inputArr[index]['file'] = input.files![0];\n        const ext = input.files![0].name.split(\".\")[input.files![0].name.split(\".\").length - 1]\n        if(input.files![0].size > this.maxSize) {\n          this.setError('Maximum allowed file size is ' + (this.maxSize/1024) + ' KB');\n          setTimeout(() => {\n            this.clearMessages();\n            this.inputArr[index] = {};\n          }, 3000);\n          return;\n        }\n\n        if(!this.getAllowedExtensions().includes(ext)) {\n          this.setError('This file extension is not allowed');\n          setTimeout(() => {\n            this.clearMessages();\n            this.inputArr[index] = {};\n          }, 3000);\n          return;\n        }\n\n        //console.log('input array', this.in);\n      });\n\n      (this._SfUploadContainer as HTMLDivElement).querySelector('#button-cancel-'+i)?.addEventListener('click', (ev: any) => {\n        const index = ev.currentTarget.id.split(\"-\")[2];\n        console.log('cancel clicked ', ev.currentTarget, index);\n        this.inputArr[index] = \"\";\n      });\n\n      (this._SfUploadContainer as HTMLDivElement).querySelector('#button-upload-'+i)?.addEventListener('click', (ev: any) => {\n        const index = ev.currentTarget.id.split(\"-\")[2];\n        console.log('upload clicked ', ev.currentTarget, index);\n        for(var i = 0; i < this.inputArr.length; i++) {\n          this.inputArr[i][\"progress\"] = true;\n        }\n        \n        this.beginUploadJob(index, this.inputArr[index]['file']);\n      });\n\n      (this._SfUploadContainer as HTMLDivElement).querySelector('#button-open-'+i)?.addEventListener('click', (ev: any) => {\n        const index = ev.currentTarget.id.split(\"-\")[2];\n        console.log('open clicked ', ev.currentTarget, index, this.inputArr[index]['key']);\n        this.getKeyData(this.inputArr[index]['key'])\n      });\n\n    }\n\n    console.log(this.inputArr);\n\n  }\n\n  processChangeInput = () => {\n    console.log('process change inputs');\n    this.populateInputs();\n  }\n\n  processChangeUploadProgress = () => {\n    console.log('upload progress', this.uploadProgress);\n    if(this.uploadProgressReceiver != null) {\n      this.uploadProgressUpdater(this.uploadProgressReceiver, this.uploadProgress.progress);\n    }\n  }\n\n  // processExtractState = () => {\n\n  //   console.log('extract state', this.extractState);\n  //   this.populateInputs();\n\n  // }\n\n  initListeners = () => {\n\n    Util.listenForChange(this.inputArr, this.processChangeInput)\n    Util.listenForChange(this.uploadProgress, this.processChangeUploadProgress)\n    // Util.listenForChange(this.extractState, this.processExtractState)\n\n  }\n\n  prepopulateInputs = () => {\n\n    console.log('prepop', this.prepopulatedInputArr);\n    const arr = JSON.parse(this.prepopulatedInputArr);\n    console.log('prepop', arr);\n    this.inputArr = [];\n    for(var i = 0; i < arr.length; i++) {\n      const obj: any = {};\n      obj['key'] = arr[i]['key'];\n      obj['file'] = {};\n      obj['file']['name'] = arr[i]['key'] + '.' + arr[i]['ext'];\n      obj['file']['ext'] = arr[i]['ext'];\n      if(arr[i]['jobId'] != null) {\n        obj['jobId'] = arr[i]['jobId']\n      }\n      if(arr[i]['arrWords'] != null) {\n        obj['arrWords'] = arr[i]['arrWords']\n        obj['arrWordsMeta'] = arr[i]['arrWordsMeta']\n      }\n      this.inputArr.push(obj);\n    }\n    if(arr.length === 0) {\n      this.inputArr = [];\n    }\n\n    console.log('prepop', 'executeAndUpdateExtract',this.inputArr);\n\n    for(var i = 0; i < arr.length; i++) {\n      if(arr[i]['jobId'] != null && arr[i]['arrWords'] == null) {\n        this.executeAndUpdateExtract(arr[i]['jobId'], i);\n      }\n    }\n    \n\n  }\n\n  loadMode = async () => {\n\n    this.prepopulateInputs();\n    this.populateInputs();\n    this.initListeners();\n\n  }\n\n  constructor() {\n    super();\n  }\n\n  protected override firstUpdated(_changedProperties: PropertyValueMap<any> | Map<PropertyKey, unknown>): void {\n\n    this.loadMode();\n\n  }\n  \n  override connectedCallback() {\n    super.connectedCallback()\n  }\n  \n  override render() {\n\n    \n\n    return html`\n          \n      <link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\">\n      <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0\" />\n      <div class=\"SfIUploaderC\">\n        <div id=\"upload-container\">\n\n        </div>\n\n        <div id=\"detail-container\" class=\"hide\" part=\"detail-container\">\n\n        </div>\n\n      </div>\n      <div class=\"d-flex justify-between\">\n          <div class=\"lb\"></div>\n          <div>\n            <div class=\"div-row-error div-row-submit gone\">\n              <div part=\"errormsg\" class=\"div-row-error-message\"></div>\n            </div>\n            <div class=\"div-row-success div-row-submit gone\">\n              <div part=\"successmsg\" class=\"div-row-success-message\"></div>\n            </div>\n          </div>\n          <div class=\"rb\"></div>\n      </div>\n      <div class=\"d-flex justify-center\">\n        <div class=\"loader-element\"></div>\n      </div>\n\n    `;\n  }\n\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'sf-i-uploader': SfIUploader;\n  }\n}\n"]}